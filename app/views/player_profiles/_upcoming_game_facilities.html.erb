<hr>
<div class="container">
<div class="row">
  <div class="col-md-4">

  <div id="facilitymap" style="width: 100%; height: 400px"></div>
  <%= upcoming = @player.upcoming.map { |facility| facility.facility_id } %>
  <br>
  <% Facility.where(id: [upcoming] ).map do |facility|  %>
  <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["new_google_api"] %>"></script>
    <script>
      function initialize() {

        for (var i = 0; i <  <%= upcoming.length %>; i++) {
          var location = { lat: <%= facility.latitude %>, lng: <%= facility.longitude %> };
          var map = new google.maps.Map(document.getElementById('facilitymap'), {
            center: location,
            zoom:14
          });
        }

        var marker = new google.maps.Marker({
          position: location,
          map: map
        });
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  <% end %>
</div>
</div>


</div>
<br>
<br>
<br>
